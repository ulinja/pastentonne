---
services:
  pastentonne:
    container_name: pastentonne
    restart: unless-stopped
    build:
      context: ..
      dockerfile: ./docker/app.Dockerfile
      args:
        TIMEZONE: ${TIMEZONE:?error}
        UID: ${UID:?error}
        GID: ${GID:?error}
        NUXT_DATA_DIR: ${NUXT_DATA_DIR:?error}
        NUXT_SESSION_PASSWORD: ${NUXT_SESSION_PASSWORD:?error}
        NUXT_OAUTH_AUTHENTIK_CLIENT_ID: ${NUXT_OAUTH_AUTHENTIK_CLIENT_ID:?error}
        NUXT_OAUTH_AUTHENTIK_CLIENT_SECRET: ${NUXT_OAUTH_AUTHENTIK_CLIENT_SECRET:?error}
        NUXT_OAUTH_AUTHENTIK_DOMAIN: ${NUXT_OAUTH_AUTHENTIK_DOMAIN:?error}
        NUXT_OAUTH_AUTHENTIK_REDIRECT_URL: ${NUXT_OAUTH_AUTHENTIK_REDIRECT_URL:?error}
    env_file:
      - ../.env
    ports:
      - "127.0.0.1:8000:8000"
    volumes:
      - ../.data:${NUXT_DATA_DIR:?error}
